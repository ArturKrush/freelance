{% extends 'main/performer_layout.html' %}

{% load static %}

{% block css_block %}
    <link rel="stylesheet" href="{% static 'main/css/main.css' %}">
{% endblock %}

{% block title %}Прогрес виконання замовлення{% endblock %}

{% block content %}
    <div class="features">
        <h3> Прогрес замовлення: {{ order.topic }} </h3>

        {% for el in progress_list %}
            <div class="alert alert-warning">
                <p>{{ el.text_info }}</p>
                <p> Посилання на рисунок: {{ el.screenshot }} </p>
                <p> Дата та час створення: {{ el.creation_time }} </p>
                <p> Дата та час оновлення: {{ el.update_time }} </p>

                <div class="d-flex justify-content-center gap-3 mt-4 flex-wrap">
                    <a href="{% url 'progress-update' order.id el.id %}" class="btn btn-secondary">Змінити</a>
                    <a href="{% url 'progress-delete' el.id %}" class="btn btn-dark">Видалити</a>
                </div>
            </div>
        {% empty %}
            <p>Немає жодного оновлення прогресу.</p>
        {% endfor %}

        <form class="form-inline mb-4 progress-form" method="post"
              action="
                      {% if editing %}{% url 'progress-update' order.id progress_instance.id %}{% else %}{% url 'perf-progress' order.id %}{% endif %}">
            {% csrf_token %}
            <div class="mb-3">
                {{ form.text_info }}
            </div>
            <div class="mb-3">
                {{ form.screenshot }}
            </div>
            <button type="submit" class="btn btn-success mt-2">Прийняти</button>
        </form>

        {% if messages %}
            <div>
                {% for message in messages %}
                    <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endblock %}
